<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Tasman Traverse - test map</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
    <script src='sheetsee.js'></script>
</head>
<body>
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      var URL = '1slpWl7CxBZwhdFU_Eyqi_W2NRGq5cfOw-s_WxEX7dLw'
      Tabletop.init({key: URL, callback: showInfo, simpleSheet: true})
    })

    function showInfo (data) {
      var mapOptions = {
        data: data,
        mapDiv: 'map',
        geoJSONincludes: ['name', 'latitude', 'longitude'],
        template: '<p>{{name}}</p>'
      }
      //Sheetsee.loadMap(mapOptions)
      var optionsJSON = ['name', 'latitude', 'longitude']
      var geoJSON = Sheetsee.createGeoJSON(data, optionsJSON)
      Sheetsee.createGeoJSON(data, optionsJSON)
      console.log(geoJSON);
      document.write(geoJSON);
    }
  </script>
</body>
</html>
